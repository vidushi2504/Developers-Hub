{% extends 'users/base.html' %}

  {% block body %}
  <style>
    .article-img {
            border-radius: 9em;
            border: .5px solid black;
            background-color: #eee;
          }
  </style>
        <article class="media content-section" class="item">
                <img class="article-img rounded-circle my-2" src="{{ post.author.account.userImage.url }}"></img>
                <div class="media-body ml-2 w3-round">
                  <div class="article-metadata">
                    <a class="mr-2" href="{% url 'account' post.author.id %}">{{ post.author|title }}</a>
                    <small class="text-muted">{{ post.category|title }}</small>
                    <small class="text-muted" style="float:right;">{{ post.date_posted|date:"F d, Y" }}</small>
                  </div>
                  <h4></h4>
                  <h4><a class="article-title" href="{% url 'post-detail' post.id %}">{{ post.title|title }}</a></h4>
                  <p class="article-content">{{post.content|safe}}</p>
                </div>
              </article>
        {% if object.author == user %}
          <div>
            {% if object.done == False %}
              <a class="btn btn-outline-secondary bt-sm mt-1 mb-2" href="{% url 'post-update' object.id %}">Update</a>
            {% else %}
               <button type="button" style="float: right;"class="btn btn-success active">Completed!</button>
            {% endif %}
            <a class="btn btn-outline-danger bt-sm mt-1 mb-2" href="{% url 'post-delete' object.id %}">Delete</a>
          </div>
        {% endif %}
        {% if object.assign_to %}
            <a href="#" class="btn btn-dark active " style="float: right;" role="button" aria-pressed="true">Assigned to  -->  {{ object.assign_to }}</a>
            <br>
        {% endif %}
        <br>
        <hr>    
        <h2>Comment Section</h2>
        {% if not post.comments.all %}
          {% if user.is_authenticated %}
            <a class="btn btn-primary my-4" href="{% url 'add-comment' post.pk %}">Be the first one to comment!</a>
          {% else %}
            <a class="btn btn-primary my-4" href="{% url 'login' %}">Be the first one to comment!</a>
          {% endif %}
        {% else %}
            {% if user.is_authenticated %}
                <a class="btn btn-primary my-4" href="{% url 'add-comment' post.pk %}">Add a comment</a>
            {% else %}
                <a class="btn btn-primary my-4" href="{% url 'login' %}">Add a comment</a>
            {% endif %}
            <br>
            
            {% for comment in post.comments.all %}
                <p>
                    <a href="{% url 'account' comment.author.id %}">{{ comment.author }}</a> -<small class="text-muted"> {{ comment.date_added }}</small>
                <br>
                {{ comment.body }}</p>
                
            {% endfor %}
            <hr>
        {% endif %}
    <br>
      
  {% endblock %}
